[gd_scene load_steps=17 format=4 uid="uid://byt35up7juchg"]

[ext_resource type="Script" uid="uid://cl2mhm0eiwf6b" path="res://Scripts/Managers and Controllers/TowerCreatorController.cs" id="1_iqnq1"]
[ext_resource type="Script" uid="uid://dgvyf41h20a5b" path="res://Scripts/Abstract Classes/Tower/Projectile.cs" id="2_m4638"]
[ext_resource type="PackedScene" uid="uid://c53r4y5k7lptf" path="res://Custom Resources/BaseTowers/BasicTower/BasicTower.tscn" id="2_pcf17"]
[ext_resource type="PackedScene" uid="uid://m4rsxkv8b7ce" path="res://Scenes/TowerCreation/StatSelector.tscn" id="3_qpodo"]
[ext_resource type="Resource" uid="uid://diabts3pmdc7t" path="res://Custom Resources/Projectiles/Bullet/BulletProjectileResource.tres" id="3_rxuld"]
[ext_resource type="PackedScene" uid="uid://d06d7n3ydut8p" path="res://Scenes/TowerCreation/ModifierSelector.tscn" id="4_4tq1g"]
[ext_resource type="Resource" uid="uid://ds31paw0q7ffx" path="res://Custom Resources/Projectiles/Sniper/SniperProjectileResource.tres" id="4_cigfv"]
[ext_resource type="Script" uid="uid://c4n71gxadig0q" path="res://Scripts/Abstract Classes/Tower/TowerEffect.cs" id="5_akxta"]
[ext_resource type="Theme" uid="uid://dau7t85gbci6u" path="res://UIStuff/TowerCreatorUITheme.tres" id="5_bk7jn"]
[ext_resource type="Resource" uid="uid://yobokgplsuku" path="res://Custom Resources/Effects/Damage/DamageEffectResource.tres" id="5_k7xnd"]
[ext_resource type="Resource" uid="uid://dunae7lk31h0u" path="res://Custom Resources/Effects/Chill/ChillEffectResource.tres" id="6_vvvic"]
[ext_resource type="PackedScene" uid="uid://djjdey4gi5ebf" path="res://Custom Resources/BaseTowers/ShotgunTower/ShotgunTower.tscn" id="7_akxta"]
[ext_resource type="TileSet" uid="uid://fgeau1gbnvdy" path="res://TileSets/MainTileSet.tres" id="7_gom0i"]
[ext_resource type="PackedScene" uid="uid://bn8ls5syaloyf" path="res://Scenes/LevelScenes/TileHighlight.tscn" id="8_gom0i"]
[ext_resource type="Script" uid="uid://bvunvv3p5u3e3" path="res://Scripts/TowerCreation/TowerColorPickerButton.cs" id="11_bdbue"]
[ext_resource type="Script" uid="uid://bx1inkekj1aan" path="res://Scripts/TowerCreation/TowerSelector.cs" id="19_p8u2g"]

[node name="TowerCreator" type="Node2D" node_paths=PackedStringArray("_towerCreatorUI", "_towerPreviewArea")]
z_index = -2
script = ExtResource("1_iqnq1")
ProjectileOptions = Array[ExtResource("2_m4638")]([ExtResource("3_rxuld"), ExtResource("4_cigfv")])
EffectOptions = Array[ExtResource("5_akxta")]([ExtResource("5_k7xnd"), ExtResource("6_vvvic")])
TowerTypeScenes = Array[PackedScene]([ExtResource("2_pcf17"), ExtResource("7_akxta")])
_towerCreatorUI = NodePath("UI/TowerCreatorUIPanel/TowerCreatorUI")
_towerPreviewArea = NodePath("TowerPreview")
_statPickerScene = ExtResource("3_qpodo")
_modifierPickerScene = ExtResource("4_4tq1g")

[node name="TowerPreview" type="TileMapLayer" parent="." groups=["Tilemap"]]
tile_map_data = PackedByteArray("AAAAAAAAAQACAAMAAAAAAAEAAQACAAMAAAABAAAAAQACAAMAAAABAAEAAQACAAMAAAACAAAAAQACAAMAAAACAAEAAQACAAMAAAADAAAAAQACAAMAAAAEAAAAAQACAAMAAAAFAAAAAQACAAMAAAAGAAAAAQACAAMAAAAHAAAAAQACAAMAAAAIAAAAAQACAAMAAAAJAAAAAQACAAMAAAAKAAAAAQACAAMAAAALAAAAAQACAAMAAAAMAAAAAQACAAMAAAANAAAAAQACAAMAAAAOAAAAAQACAAMAAAAPAAAAAQACAAMAAAAQAAAAAQACAAMAAAARAAAAAQACAAMAAAARAAEAAQABAAMAAAAAAAIAAQACAAMAAAAAAAMAAQACAAMAAAAAAAQAAQACAAMAAAAAAAUAAQACAAMAAAAAAAYAAQACAAMAAAAAAAcAAQACAAMAAAAAAAgAAQACAAMAAAAAAAkAAQACAAMAAAABAAIAAQACAAMAAAABAAMAAQACAAMAAAABAAQAAQACAAMAAAABAAUAAQACAAMAAAABAAYAAQACAAMAAAABAAcAAQACAAMAAAABAAgAAQACAAMAAAABAAkAAQACAAMAAAACAAIAAQACAAMAAAACAAMAAQACAAMAAAACAAQAAQACAAMAAAACAAUAAQACAAMAAAACAAYAAQACAAMAAAACAAcAAQACAAMAAAACAAgAAQACAAMAAAACAAkAAQACAAMAAAADAAgAAQACAAMAAAADAAkAAQACAAMAAAAEAAkAAQACAAMAAAADAAEAAQACAAMAAAADAAIAAQACAAMAAAADAAMAAQACAAMAAAADAAQAAQACAAMAAAADAAUAAQACAAMAAAADAAYAAQACAAMAAAADAAcAAQACAAMAAAAFAAEAAQACAAMAAAAGAAEAAQABAAMAAAAHAAEAAQABAAMAAAAIAAEAAQABAAMAAAAJAAEAAQABAAMAAAAKAAEAAQABAAMAAAALAAEAAQABAAMAAAAMAAEAAQABAAMAAAANAAEAAQABAAMAAAAOAAEAAQABAAMAAAAPAAEAAQABAAMAAAAQAAEAAQABAAMAAAAEAAEAAQACAAMAAAAEAAIAAQACAAMAAAAEAAMAAQACAAMAAAAEAAQAAQACAAMAAAAEAAUAAQACAAMAAAAEAAYAAQACAAMAAAAEAAcAAQACAAMAAAAEAAgAAQACAAMAAAAEAAoAAQACAAMAAAADAAoAAQACAAMAAAACAAoAAQACAAMAAAABAAoAAQACAAMAAAAAAAoAAQACAAMAAAAFAAoAAQACAAMAAAAGAAoAAQABAAMAAAAHAAoAAQABAAMAAAAIAAoAAQABAAMAAAAJAAoAAQABAAMAAAAKAAoAAQABAAMAAAALAAoAAQABAAMAAAAMAAoAAQABAAMAAAANAAoAAQABAAMAAAAOAAoAAQABAAMAAAAPAAoAAQABAAMAAAAQAAoAAQABAAMAAAARAAoAAQABAAMAAAASAAoAAQABAAMAAAATAAoAAQACAAMAAAATAAkAAQACAAMAAAATAAgAAQACAAMAAAATAAcAAQACAAMAAAATAAYAAQACAAMAAAATAAUAAQACAAMAAAATAAQAAQACAAMAAAATAAMAAQACAAMAAAATAAIAAQACAAMAAAATAAEAAQACAAMAAAATAAAAAQACAAMAAAASAAAAAQACAAMAAAASAAEAAQABAAMAAAASAAIAAQABAAMAAAASAAMAAQABAAMAAAASAAQAAQABAAMAAAASAAUAAQABAAMAAAASAAYAAQABAAMAAAASAAcAAQABAAMAAAASAAgAAQABAAMAAAASAAkAAQABAAMAAAAAAAsAAQACAAMAAAABAAsAAQACAAMAAAACAAsAAQACAAMAAAADAAsAAQACAAMAAAAEAAsAAQACAAMAAAAFAAsAAQACAAMAAAAGAAsAAQACAAMAAAAHAAsAAQACAAMAAAAIAAsAAQACAAMAAAAJAAsAAQACAAMAAAAKAAsAAQACAAMAAAALAAsAAQACAAMAAAAMAAsAAQACAAMAAAANAAsAAQACAAMAAAAOAAsAAQACAAMAAAATAAsAAQACAAMAAAASAAsAAQACAAMAAAARAAsAAQACAAMAAAAQAAsAAQACAAMAAAAPAAsAAQACAAMAAAAGAAIAAQABAAMAAAAGAAMAAQABAAMAAAAGAAQAAQABAAMAAAAGAAUAAQABAAMAAAAGAAYAAQABAAMAAAAGAAcAAQABAAMAAAAGAAgAAQABAAMAAAAGAAkAAQABAAMAAAAHAAIAAQABAAMAAAAHAAMAAQACAAIAAAAHAAQAAQABAAAAAAAHAAUAAQABAAAAAAAHAAYAAQABAAAAAAAHAAcAAQABAAAAAAAHAAgAAQABAAEAAAAHAAkAAQABAAMAAAAIAAIAAQABAAMAAAAIAAMAAQABAAMAAAAIAAQAAQABAAMAAAAIAAUAAQABAAMAAAAIAAYAAQABAAMAAAAIAAcAAQABAAMAAAAIAAgAAQAAAAAAAAAIAAkAAQABAAMAAAAJAAIAAQABAAMAAAAJAAMAAQAAAAEAAAAJAAQAAQABAAAAAAAJAAUAAQABAAAAAAAJAAYAAQABAAEAAAAJAAcAAQABAAMAAAAJAAgAAQAAAAAAAAAJAAkAAQABAAMAAAAKAAIAAQABAAMAAAAKAAMAAQAAAAAAAAAKAAQAAQABAAMAAAAKAAUAAQABAAMAAAAKAAYAAQAAAAAAAAAKAAcAAQABAAMAAAAKAAgAAQAAAAAAAAAKAAkAAQABAAMAAAALAAIAAQABAAMAAAALAAMAAQAAAAAAAAALAAQAAQABAAMAAAALAAUAAQABAAMAAAALAAYAAQACAAAAAAALAAcAAQABAAAAAAALAAgAAQACAAEAAAALAAkAAQABAAMAAAAMAAIAAQABAAMAAAAMAAMAAQAAAAAAAAAMAAQAAQABAAMAAAAMAAUAAQABAAMAAAAMAAYAAQABAAMAAAAMAAcAAQABAAMAAAAMAAgAAQABAAMAAAAMAAkAAQABAAMAAAANAAIAAQABAAMAAAANAAMAAQAAAAAAAAANAAQAAQABAAMAAAANAAUAAQABAAMAAAANAAYAAQABAAMAAAANAAcAAQABAAMAAAANAAgAAQABAAMAAAANAAkAAQABAAMAAAAOAAIAAQABAAMAAAAOAAMAAQACAAAAAAAOAAQAAQABAAAAAAAOAAUAAQABAAAAAAAOAAYAAQABAAAAAAAOAAcAAQABAAAAAAAOAAgAAQABAAEAAAAOAAkAAQABAAMAAAAPAAIAAQABAAMAAAAPAAMAAQABAAMAAAAPAAQAAQABAAMAAAAPAAUAAQABAAMAAAAPAAYAAQABAAMAAAAPAAcAAQABAAMAAAAPAAgAAQAAAAAAAAAPAAkAAQABAAMAAAAQAAIAAQABAAMAAAAQAAMAAQABAAMAAAAQAAQAAQABAAMAAAAQAAUAAQABAAMAAAAQAAYAAQABAAMAAAAQAAcAAQABAAMAAAAQAAgAAQAAAAAAAAAQAAkAAQABAAMAAAARAAIAAQABAAMAAAARAAMAAQABAAMAAAARAAQAAQABAAMAAAARAAUAAQABAAMAAAARAAYAAQABAAMAAAARAAcAAQABAAMAAAARAAgAAQABAAIAAAARAAkAAQABAAMAAAAFAAIAAQACAAMAAAAFAAMAAQACAAMAAAAFAAQAAQACAAMAAAAFAAUAAQACAAMAAAAFAAYAAQACAAMAAAAFAAcAAQACAAMAAAAFAAgAAQACAAMAAAAFAAkAAQACAAMAAAD//wwAAQACAAMAAAD//wsAAQACAAMAAAD//woAAQACAAMAAAD//wkAAQACAAMAAAD//wgAAQACAAMAAAD//wcAAQACAAMAAAD//wYAAQACAAMAAAD//wUAAQACAAMAAAD//wQAAQACAAMAAAD//wMAAQACAAMAAAD//wIAAQACAAMAAAD//wEAAQACAAMAAAD//wAAAQACAAMAAAD/////AQACAAMAAAAAAP//AQACAAMAAAABAP//AQACAAMAAAACAP//AQACAAMAAAADAP//AQACAAMAAAAEAP//AQACAAMAAAAFAP//AQACAAMAAAAGAP//AQACAAMAAAAHAP//AQACAAMAAAAIAP//AQACAAMAAAAJAP//AQACAAMAAAAKAP//AQACAAMAAAALAP//AQACAAMAAAAMAP//AQACAAMAAAANAP//AQACAAMAAAAOAP//AQACAAMAAAAPAP//AQACAAMAAAAQAP//AQACAAMAAAARAP//AQACAAMAAAASAP//AQACAAMAAAATAP//AQACAAMAAAAUAP//AQACAAMAAAAUAAAAAQACAAMAAAAUAAEAAQACAAMAAAAUAAIAAQACAAMAAAAUAAMAAQACAAMAAAAUAAQAAQACAAMAAAAUAAUAAQACAAMAAAAUAAYAAQACAAMAAAAUAAcAAQACAAMAAAAUAAgAAQACAAMAAAAUAAkAAQACAAMAAAAUAAoAAQACAAMAAAAUAAsAAQACAAMAAAAUAAwAAQACAAMAAAATAAwAAQACAAMAAAASAAwAAQACAAMAAAARAAwAAQACAAMAAAAQAAwAAQACAAMAAAAPAAwAAQACAAMAAAAOAAwAAQACAAMAAAANAAwAAQACAAMAAAAMAAwAAQACAAMAAAALAAwAAQACAAMAAAAKAAwAAQACAAMAAAAJAAwAAQACAAMAAAAIAAwAAQACAAMAAAAHAAwAAQACAAMAAAAGAAwAAQACAAMAAAAFAAwAAQACAAMAAAAEAAwAAQACAAMAAAADAAwAAQACAAMAAAACAAwAAQACAAMAAAABAAwAAQACAAMAAAAAAAwAAQACAAMAAAA=")
tile_set = ExtResource("7_gom0i")

[node name="Enemy Spawn" type="Marker2D" parent="TowerPreview"]
position = Vector2(120, 57)

[node name="Enemy Goal" type="Marker2D" parent="TowerPreview"]
position = Vector2(280, 136)

[node name="TileHighlight" parent="TowerPreview" instance=ExtResource("8_gom0i")]

[node name="UI" type="CanvasLayer" parent="."]

[node name="TowerCreatorUIPanel" type="PanelContainer" parent="UI"]
custom_minimum_size = Vector2(365, 0)
layout_direction = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_left = 10.0
offset_right = 78.0
grow_vertical = 2

[node name="TowerCreatorUI" type="VBoxContainer" parent="UI/TowerCreatorUIPanel"]
layout_direction = 1
layout_mode = 2
theme = ExtResource("5_bk7jn")
alignment = 1

[node name="SaveButton" type="Button" parent="UI/TowerCreatorUIPanel/TowerCreatorUI"]
layout_mode = 2
theme = ExtResource("5_bk7jn")
text = "Save"

[node name="NameInput" type="LineEdit" parent="UI/TowerCreatorUIPanel/TowerCreatorUI"]
custom_minimum_size = Vector2(0, 44)
layout_mode = 2
theme = ExtResource("5_bk7jn")
placeholder_text = "Enter Tower Name..."
max_length = 24
context_menu_enabled = false
emoji_menu_enabled = false
virtual_keyboard_enabled = false
clear_button_enabled = true
select_all_on_focus = true
caret_blink = true

[node name="ColorPickerButton" type="ColorPickerButton" parent="UI/TowerCreatorUIPanel/TowerCreatorUI"]
layout_mode = 2
text = "Color"
alignment = 0
color = Color(1, 1, 1, 1)
edit_alpha = false
script = ExtResource("11_bdbue")

[node name="TowerSelector" type="VBoxContainer" parent="UI/TowerCreatorUIPanel/TowerCreatorUI" node_paths=PackedStringArray("ItemLabel", "ItemList", "_selectedItemButton")]
layout_mode = 2
theme = ExtResource("5_bk7jn")
script = ExtResource("19_p8u2g")
ItemLabel = NodePath("HBoxContainer/RichTextLabel")
ItemList = NodePath("ModifierList")
_selectedItemButton = NodePath("HBoxContainer/TextureButton")

[node name="HBoxContainer" type="HBoxContainer" parent="UI/TowerCreatorUIPanel/TowerCreatorUI/TowerSelector"]
layout_mode = 2

[node name="RichTextLabel" type="RichTextLabel" parent="UI/TowerCreatorUIPanel/TowerCreatorUI/TowerSelector/HBoxContainer"]
layout_mode = 2
text = "Tower Type"
fit_content = true
scroll_active = false
autowrap_mode = 0

[node name="TextureButton" type="TextureButton" parent="UI/TowerCreatorUIPanel/TowerCreatorUI/TowerSelector/HBoxContainer"]
custom_minimum_size = Vector2(32, 32)
layout_mode = 2
stretch_mode = 0

[node name="NameLabel" type="RichTextLabel" parent="UI/TowerCreatorUIPanel/TowerCreatorUI/TowerSelector/HBoxContainer"]
layout_mode = 2
text = "1"
fit_content = true
autowrap_mode = 0

[node name="ModifierList" type="ItemList" parent="UI/TowerCreatorUIPanel/TowerCreatorUI/TowerSelector"]
layout_mode = 2
allow_reselect = true
auto_width = true
auto_height = true
icon_scale = 2.0

[connection signal="pressed" from="UI/TowerCreatorUIPanel/TowerCreatorUI/SaveButton" to="." method="SaveTowerResource"]
[connection signal="picker_created" from="UI/TowerCreatorUIPanel/TowerCreatorUI/ColorPickerButton" to="UI/TowerCreatorUIPanel/TowerCreatorUI/ColorPickerButton" method="WhenPickerCreated"]
[connection signal="pressed" from="UI/TowerCreatorUIPanel/TowerCreatorUI/TowerSelector/HBoxContainer/TextureButton" to="UI/TowerCreatorUIPanel/TowerCreatorUI/TowerSelector" method="OnButtonPressed"]
[connection signal="item_selected" from="UI/TowerCreatorUIPanel/TowerCreatorUI/TowerSelector/ModifierList" to="UI/TowerCreatorUIPanel/TowerCreatorUI/TowerSelector" method="OnItemSelected"]
